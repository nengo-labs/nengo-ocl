
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <title>API reference &#8212; NengoOCL 2.1.0 docs</title>
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
<link href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:400,400i,600|Rajdhani:700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">
<link rel="stylesheet" href="https://www.nengo.ai/css/bootstrap.css" type="text/css">
<style>
  body .title-bar,
  body .documentation-source h1:after {
    background-color: #69c530;
  }
</style>
<!-- Google Tag Manager -->
<script>
 (function (w, d, s, l, i) {
   w[l] = w[l] || [];
   w[l].push({ "gtm.start": new Date().getTime(), event: "gtm.js" });
   var f = d.getElementsByTagName(s)[0],
       j = d.createElement(s),
       dl = l != "dataLayer" ? "&l=" + l : "";
   j.async = true;
   j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
   f.parentNode.insertBefore(j, f);
 })(window, document, "script", "dataLayer", "GTM-KWCR2HN");
</script>
<!-- End Google Tag Manager -->
<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://unpkg.com/scrollreveal"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/stickyfill/2.1.0/stickyfill.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>
<!-- From basic/layout.html -->
<script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
  
  
<script src="_static/underscore.js"></script>
  
  
<script src="_static/doctools.js"></script>
  
  
<script src="_static/language_data.js"></script>
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Frequently asked questions" href="faq.html" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

  </head><body class="bg-dark">

<header class="fixed-top header-top shadow-sm">
  <nav class="navbar navbar-expand-md navbar-light bg-white">
    <a class="navbar-brand" href="https://www.nengo.ai/">
      <img
        src="https://www.nengo.ai/design/_images/general-full-light.svg"
        alt="Nengo"
        class="logo"
      />
    </a>
    <button
      class="navbar-toggler"
      type="button"
      data-toggle="collapse"
      data-target="#navbar-collapse"
      aria-controls="navbar-collapse"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbar-collapse">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <a class="nav-link" href="https://www.nengo.ai/">What is Nengo?</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://www.nengo.ai/examples/">Examples</a>
        </li>
        <li class="nav-item dropdown active">
          <a
            class="nav-link dropdown-toggle"
            id="navbar-dropdown-docs"
            data-toggle="dropdown"
            aria-haspopup="true"
            aria-expanded="false"
            href="#"
            >Documentation</a
          >
          <div
            class="dropdown-menu shadow-lg border-0"
            aria-labelledby="navbar-dropdown-docs"
          >
            
            <a class="dropdown-item" href="https://www.nengo.ai/nengo/">Nengo core</a>
            <a class="dropdown-item" href="https://github.com/nengo/nengo-gui/">NengoGUI</a>
            <a class="dropdown-item" href="https://www.nengo.ai/nengo-dl/">NengoDL</a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="https://www.nengo.ai/nengo-spa/">NengoSPA</a>
            <a class="dropdown-item" href="https://www.nengo.ai/nengo-extras/">NengoExtras</a>
            <a class="dropdown-item" href="https://arvoelke.github.io/nengolib-docs/">Nengolib</a>
            <a class="dropdown-item" href="https://www.nengo.ai/keras-spiking">KerasSpiking</a>
            <a class="dropdown-item" href="https://www.nengo.ai/pytorch-spiking">PyTorchSpiking</a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="https://www.nengo.ai/nengo-fpga/">NengoFPGA</a>
            <a class="dropdown-item" href="https://www.nengo.ai/nengo-loihi/">NengoLoihi</a>
            <a class="dropdown-item" href="https://labs.nengo.ai/nengo-ocl/">NengoOCL</a>
            <a class="dropdown-item" href="https://github.com/project-rig/nengo_spinnaker">NengoSpiNNaker</a>
            <a class="dropdown-item" href="https://github.com/nengo-labs/nengo-mpi">NengoMPI</a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="https://www.nengo.ai/documentation/"
              >All documentation</a
            >
          </div>
        </li>
        <li class="nav-item dropdown">
          <a
            class="nav-link dropdown-toggle"
            id="navbar-dropdown-community"
            data-toggle="dropdown"
            aria-haspopup="true"
            aria-expanded="false"
            href="#"
            >Community</a
          >
          <div
            class="dropdown-menu shadow-lg border-0"
            aria-labelledby="navbar-dropdown-community"
          >
            <a class="dropdown-item" href="https://forum.nengo.ai">Forum</a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="https://www.nengo.ai/people/"
              >People</a
            >
            <a class="dropdown-item" href="https://www.nengo.ai/summer-school/"
              >Summer school</a
            >
            <a class="dropdown-item" href="https://www.nengo.ai/contributing/"
              >Contributing</a
            >
            <a class="dropdown-item" href="https://www.nengo.ai/publications/"
              >Publications</a
            >
            <a class="dropdown-item" href="https://www.nengo.ai/videos/"
              >Videos</a
            >
            <a class="dropdown-item" href="https://www.nengo.ai/conduct/"
              >Code of conduct</a
            >
            <a class="dropdown-item" href="https://www.nengo.ai/caa/">CAA</a>
          </div>
        </li>
        <li class="nav-item">
          <a
            class="nav-link btn btn-success btn-sm text-white"
            href="https://www.nengo.ai/getting-started/"
            >Getting started</a
          >
        </li>
      </ul>
    </div>
  </nav>
</header>
<div class="main-content gradient-top">
  <div class="container-fluid">
    <div class="row"><a class="toggle-sidenav d-block d-md-none" href="#"
  ><i class="icon-close fa fa-fw fa-arrow-left"></i
  ><i class="icon-open fa fa-fw fa-arrow-right"></i
></a>
<div role="complementary" class="sidenav col-4 col-xl-3 p-0 border-right">
  <h3 class="pt-5 px-5">
    <a href="index.html">
      <img
        class="img-fluid documentation-image"
        src="https://www.nengo.ai/design/_images/nengo-ocl-full-light.svg"
        alt="NengoOCL"
      />
    </a>
  </h3>
<form class="px-5 py-3 my-0 border-bottom" action="search.html" method="get">
  <div class="form-group form-group-single">
    <input type="text" name="q" class="form-control" placeholder="Search" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
    <button type="submit" class="btn btn-link">
      <img src="https://www.nengo.ai/img/icon-search.svg" alt="Go" />
    </button>
  </div>
</form><div class="p-5 toctree">
  
    <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently asked questions</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">API reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#simulator">Simulator</a></li>
<li class="toctree-l2"><a class="reference internal" href="#clra-nonlinearities">clra_nonlinearities</a></li>
<li class="toctree-l2"><a class="reference internal" href="#clra-gemv">clra_gemv</a></li>
<li class="toctree-l2"><a class="reference internal" href="#raggedarrays">RaggedArrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-nengo_ocl.operators">Operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-nengo_ocl.ast_conversion">Python AST conversion</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-nengo_ocl.utils">Utils</a></li>
</ul>
</li>
</ul>

  
  </div>
  
  <form class="p-5 my-0 border-top">
    <div class="form-group">
      <label class="text-gray">Version:</label>
      <select class="custom-select" onchange="switchVersion(this);">
        
        
        <option value="../api.html">latest</option>
        
        
          
        <option value="../v2.0.0/api.html">
          v2.0.0
        </option>
          
        
      </select>
    </div>
  </form>
  
</div>
      

      <div class="col-12 col-md-8 col-xl-9">
        <div class="container">
          <div class="row">
            <div class="col-10 offset-1 pb-5 documentation-source" role="main">
              
              
  <div class="section" id="api-reference">
<h1>API reference<a class="headerlink" href="#api-reference" title="Permalink to this headline">¶</a></h1>
<div class="section" id="simulator">
<h2>Simulator<a class="headerlink" href="#simulator" title="Permalink to this headline">¶</a></h2>
<p>This is the NengoOCL simulator.
It uses the Nengo builder to take a model
and turn it into signals and operators.
Then, we copy all the signals into OpenCL,
and create OpenCL versions of all the operators.
This is what the <code class="docutils literal notranslate"><span class="pre">Simulator.plan_*</span></code> functions do;
each one of them is responsible for
creating an OpenCL kernel (or kernels)
to execute the corresponding operator.</p>
<dl class="py class">
<dt id="nengo_ocl.Simulator">
<em class="property">class </em><code class="sig-prename descclassname">nengo_ocl.</code><code class="sig-name descname">Simulator</code><span class="sig-paren">(</span><em class="sig-param">network</em>, <em class="sig-param">dt=0.001</em>, <em class="sig-param">seed=None</em>, <em class="sig-param">model=None</em>, <em class="sig-param">context=None</em>, <em class="sig-param">n_prealloc_probes=32</em>, <em class="sig-param">profiling=None</em>, <em class="sig-param">if_python_code='none'</em>, <em class="sig-param">planner=&lt;function greedy_planner&gt;</em>, <em class="sig-param">progress_bar=True</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/nengo-labs/nengo-ocl/blob/v2.1.0/nengo_ocl/simulator.py#L145-L1458"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nengo_ocl.Simulator" title="Permalink to this definition">¶</a></dt>
<dd><p>Simulator for running Nengo models in OpenCL.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>network, dt, seed, model</strong></dt><dd><p>These parameters are the same as in <a class="reference external" href="https://www.nengo.ai/nengo/backend-api.html#nengo.Simulator" title="(in Nengo v3.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">nengo.Simulator</span></code></a>.</p>
</dd>
<dt><strong>context</strong><span class="classifier"><a class="reference external" href="https://documen.tician.de/pyopencl/runtime_platform.html#pyopencl.Context" title="(in PyOpenCL v2020.3.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pyopencl.Context</span></code></a> (optional)</span></dt><dd><p>OpenCL context specifying which device(s) to run on. By default, we
will create a context by calling <a class="reference external" href="https://documen.tician.de/pyopencl/runtime_platform.html#pyopencl.create_some_context" title="(in PyOpenCL v2020.3.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pyopencl.create_some_context</span></code></a>
and use this context as the default for all subsequent instances.</p>
</dd>
<dt><strong>n_prealloc_probes</strong><span class="classifier">int (optional)</span></dt><dd><p>Number of timesteps to buffer when probing. Larger numbers mean less
data transfer with the device (faster), but use more device memory.</p>
</dd>
<dt><strong>profiling</strong><span class="classifier">boolean (optional)</span></dt><dd><p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">print_profiling()</span></code> will show profiling information.
By default, will check the environment variable <code class="docutils literal notranslate"><span class="pre">NENGO_OCL_PROFILING</span></code></p>
</dd>
<dt><strong>if_python_code</strong><span class="classifier">‘none’ | ‘warn’ | ‘error’</span></dt><dd><p>How the simulator should react if a Python function cannot be converted
to OpenCL code.</p>
</dd>
<dt><strong>planner</strong><span class="classifier">callable</span></dt><dd><p>A function to plan operator order. See <code class="docutils literal notranslate"><span class="pre">nengo_ocl.planners</span></code>.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="py method">
<dt id="nengo_ocl.Simulator.dt">
<em class="property">property </em><code class="sig-name descname">dt</code><a class="headerlink" href="#nengo_ocl.Simulator.dt" title="Permalink to this definition">¶</a></dt>
<dd><p>(float) The time step of the simulator.</p>
</dd></dl>

<dl class="py method">
<dt id="nengo_ocl.Simulator.n_steps">
<em class="property">property </em><code class="sig-name descname">n_steps</code><a class="headerlink" href="#nengo_ocl.Simulator.n_steps" title="Permalink to this definition">¶</a></dt>
<dd><p>(int) The current time step of the simulator.</p>
</dd></dl>

<dl class="py method">
<dt id="nengo_ocl.Simulator.time">
<em class="property">property </em><code class="sig-name descname">time</code><a class="headerlink" href="#nengo_ocl.Simulator.time" title="Permalink to this definition">¶</a></dt>
<dd><p>(float) The current time of the simulator.</p>
</dd></dl>

<dl class="py method">
<dt id="nengo_ocl.Simulator.signals">
<em class="property">property </em><code class="sig-name descname">signals</code><a class="headerlink" href="#nengo_ocl.Simulator.signals" title="Permalink to this definition">¶</a></dt>
<dd><p>Get/set [properly-shaped] signal value (either 0d, 1d, or 2d)</p>
</dd></dl>

<dl class="py method">
<dt id="nengo_ocl.Simulator.clear_probes">
<code class="sig-name descname">clear_probes</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/nengo-labs/nengo-ocl/blob/v2.1.0/nengo_ocl/simulator.py#L482-L489"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nengo_ocl.Simulator.clear_probes" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear all probe histories.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="nengo_ocl.Simulator.close">
<code class="sig-name descname">close</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/nengo-labs/nengo-ocl/blob/v2.1.0/nengo_ocl/simulator.py#L491-L505"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nengo_ocl.Simulator.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Closes the simulator.</p>
<p>Any call to <a class="reference internal" href="#nengo_ocl.Simulator.run" title="nengo_ocl.Simulator.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Simulator.run</span></code></a>, <a class="reference internal" href="#nengo_ocl.Simulator.run_steps" title="nengo_ocl.Simulator.run_steps"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Simulator.run_steps</span></code></a>,
<a class="reference internal" href="#nengo_ocl.Simulator.step" title="nengo_ocl.Simulator.step"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Simulator.step</span></code></a>, and <a class="reference internal" href="#nengo_ocl.Simulator.reset" title="nengo_ocl.Simulator.reset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Simulator.reset</span></code></a> on a closed simulator raises
a <a class="reference external" href="https://www.nengo.ai/nengo/backend-api.html#nengo.exceptions.SimulatorClosed" title="(in Nengo v3.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">nengo.exceptions.SimulatorClosed</span></code></a> exception.</p>
</dd></dl>

<dl class="py method">
<dt id="nengo_ocl.Simulator.reset">
<code class="sig-name descname">reset</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">seed</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/nengo-labs/nengo-ocl/blob/v2.1.0/nengo_ocl/simulator.py#L544-L571"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nengo_ocl.Simulator.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset the simulator state.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>seed</strong><span class="classifier">None</span></dt><dd><p>Not implemented. Changing the simulator seed during reset is not supported
by NengoOCL.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="nengo_ocl.Simulator.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">time_in_seconds</span></em>, <em class="sig-param"><span class="n">progress_bar</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/nengo-labs/nengo-ocl/blob/v2.1.0/nengo_ocl/simulator.py#L573-L616"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nengo_ocl.Simulator.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Simulate for the given length of time.</p>
<p>If the given length of time is not a multiple of <code class="docutils literal notranslate"><span class="pre">dt</span></code>,
it will be rounded to the nearest <code class="docutils literal notranslate"><span class="pre">dt</span></code>. For example, if <code class="docutils literal notranslate"><span class="pre">dt</span></code>
is 0.001 and <code class="docutils literal notranslate"><span class="pre">run</span></code> is called with <code class="docutils literal notranslate"><span class="pre">time_in_seconds=0.0006</span></code>,
the simulator will advance one timestep, resulting in the actual
simulator time being 0.001.</p>
<p>The given length of time must be positive. The simulator cannot
be run backwards.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>time_in_seconds</strong><span class="classifier">float</span></dt><dd><p>Amount of time to run the simulation for. Must be positive.</p>
</dd>
<dt><strong>progress_bar</strong><span class="classifier">bool or <a class="reference external" href="https://www.nengo.ai/nengo/utils.html#nengo.utils.progress.ProgressBar" title="(in Nengo v3.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">nengo.utils.progress.ProgressBar</span></code></a>, optional</span></dt><dd><p>Progress bar for displaying the progress of the simulation run.</p>
<p>If True, the default progress bar will be used.
If False, the progress bar will be disabled.
For more control over the progress bar, pass in a
<a class="reference external" href="https://www.nengo.ai/nengo/utils.html#nengo.utils.progress.ProgressBar" title="(in Nengo v3.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">nengo.utils.progress.ProgressBar</span></code></a> instance.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="nengo_ocl.Simulator.run_steps">
<code class="sig-name descname">run_steps</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">steps</span></em>, <em class="sig-param"><span class="n">progress_bar</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/nengo-labs/nengo-ocl/blob/v2.1.0/nengo_ocl/simulator.py#L618-L674"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nengo_ocl.Simulator.run_steps" title="Permalink to this definition">¶</a></dt>
<dd><p>Simulate for the given number of <code class="docutils literal notranslate"><span class="pre">dt</span></code> steps.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>steps</strong><span class="classifier">int</span></dt><dd><p>Number of steps to run the simulation for.</p>
</dd>
<dt><strong>progress_bar</strong><span class="classifier">bool or <a class="reference external" href="https://www.nengo.ai/nengo/utils.html#nengo.utils.progress.ProgressBar" title="(in Nengo v3.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">nengo.utils.progress.ProgressBar</span></code></a>, optional</span></dt><dd><p>Progress bar for displaying the progress of the simulation run.</p>
<p>If True, the default progress bar will be used.
If False, the progress bar will be disabled.
For more control over the progress bar, pass in a
<a class="reference external" href="https://www.nengo.ai/nengo/utils.html#nengo.utils.progress.ProgressBar" title="(in Nengo v3.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">nengo.utils.progress.ProgressBar</span></code></a> instance.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="nengo_ocl.Simulator.step">
<code class="sig-name descname">step</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/nengo-labs/nengo-ocl/blob/v2.1.0/nengo_ocl/simulator.py#L676-L678"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nengo_ocl.Simulator.step" title="Permalink to this definition">¶</a></dt>
<dd><p>Advance the simulator by 1 step (<code class="docutils literal notranslate"><span class="pre">dt</span></code> seconds).</p>
</dd></dl>

<dl class="py method">
<dt id="nengo_ocl.Simulator.trange">
<code class="sig-name descname">trange</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">sample_every</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">dt</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/nengo-labs/nengo-ocl/blob/v2.1.0/nengo_ocl/simulator.py#L680-L710"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nengo_ocl.Simulator.trange" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a vector of times matching probed data.</p>
<p>Note that the range does not start at 0 as one might expect, but at
the first timestep (i.e., <code class="docutils literal notranslate"><span class="pre">dt</span></code>).</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>sample_every</strong><span class="classifier">float, optional</span></dt><dd><p>The sampling period of the probe to create a range for.
If None, a time value for every <code class="docutils literal notranslate"><span class="pre">dt</span></code> will be produced.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 2.0.0: </span>Renamed from dt to sample_every</p>
</div>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="nengo_ocl.Simulator.print_profiling">
<code class="sig-name descname">print_profiling</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">sort</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/nengo-labs/nengo-ocl/blob/v2.1.0/nengo_ocl/simulator.py#L1397-L1458"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nengo_ocl.Simulator.print_profiling" title="Permalink to this definition">¶</a></dt>
<dd><p>Print recorded profiling information in a sorted table.</p>
<p>To enable profiling, pass the <code class="docutils literal notranslate"><span class="pre">profiling=True</span></code> argument when creating
the <code class="docutils literal notranslate"><span class="pre">Simulator</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>sort</strong><span class="classifier">column to sort by (negative number sorts ascending)</span></dt><dd><p>(0 = n_calls, 1 = runtime, 2 = q-time, 3 = subtime)</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="clra-nonlinearities">
<h2>clra_nonlinearities<a class="headerlink" href="#clra-nonlinearities" title="Permalink to this headline">¶</a></h2>
<p>This is where the kernels for most operators are
(i.e. most of the <code class="docutils literal notranslate"><span class="pre">Simulator.plan_*</span></code> functions
call a <code class="docutils literal notranslate"><span class="pre">plan_*</span></code> function in here to generate the kernel).
Each plan function follows roughly the same template:</p>
<ol class="arabic simple">
<li><p>Do some checks on the arguments.</p></li>
<li><p>Generate the C code for the kernel,
using Mako to fill in variable things like datatypes.</p></li>
<li><p>Compile the C code as a PyOpenCL Program, and set the arguments.</p></li>
<li><p>Create and return a <code class="docutils literal notranslate"><span class="pre">Plan</span></code> object responsible for executing
that <a class="reference external" href="https://documen.tician.de/pyopencl/runtime_program.html#pyopencl.Program" title="(in PyOpenCL v2020.3.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pyopencl.Program</span></code></a>.</p></li>
</ol>
<span class="target" id="module-nengo_ocl.clra_nonlinearities"></span><p>OpenCL kernels for everything other than GEMV.</p>
<dl class="py function">
<dt id="nengo_ocl.clra_nonlinearities.blockify_ij">
<code class="sig-prename descclassname">nengo_ocl.clra_nonlinearities.</code><code class="sig-name descname">blockify_ij</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">max_size</span></em>, <em class="sig-param"><span class="n">ra</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/nengo-labs/nengo-ocl/blob/v2.1.0/nengo_ocl/clra_nonlinearities.py#L24-L40"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nengo_ocl.clra_nonlinearities.blockify_ij" title="Permalink to this definition">¶</a></dt>
<dd><p>Blockify a single matrix or vector using the offset method</p>
</dd></dl>

<dl class="py function">
<dt id="nengo_ocl.clra_nonlinearities.plan_elementwise_inc">
<code class="sig-prename descclassname">nengo_ocl.clra_nonlinearities.</code><code class="sig-name descname">plan_elementwise_inc</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">queue</span></em>, <em class="sig-param"><span class="n">A</span></em>, <em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">Y</span></em>, <em class="sig-param"><span class="n">alpha</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">outer</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">inc</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">tag</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/nengo-labs/nengo-ocl/blob/v2.1.0/nengo_ocl/clra_nonlinearities.py#L416-L576"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nengo_ocl.clra_nonlinearities.plan_elementwise_inc" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements an element-wise increment Y += alpha * A * X</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>alpha</strong><span class="classifier">np.ndarray or None</span></dt><dd><p>Scalars to apply to each operation.</p>
</dd>
<dt><strong>outer</strong><span class="classifier">bool</span></dt><dd><p>Perform an outer product. <code class="docutils literal notranslate"><span class="pre">A</span></code> and <code class="docutils literal notranslate"><span class="pre">X</span></code> must be vectors.</p>
</dd>
<dt><strong>inc</strong><span class="classifier">bool</span></dt><dd><p>Whether to increment <code class="docutils literal notranslate"><span class="pre">Y</span></code> (True), or set it (False).</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="nengo_ocl.clra_nonlinearities.plan_linearfilter">
<code class="sig-prename descclassname">nengo_ocl.clra_nonlinearities.</code><code class="sig-name descname">plan_linearfilter</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">queue</span></em>, <em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">Y</span></em>, <em class="sig-param"><span class="n">A</span></em>, <em class="sig-param"><span class="n">B</span></em>, <em class="sig-param"><span class="n">Xbuf</span></em>, <em class="sig-param"><span class="n">Ybuf</span></em>, <em class="sig-param"><span class="n">tag</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/nengo-labs/nengo-ocl/blob/v2.1.0/nengo_ocl/clra_nonlinearities.py#L579-L805"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nengo_ocl.clra_nonlinearities.plan_linearfilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements a filter of the form</p>
<blockquote>
<div><p>y[n+1] + a[0] y[n] + … + a[i] y[n-i] = b[0] x[n] + … + b[j] x[n-j]</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt id="nengo_ocl.clra_nonlinearities.plan_probes">
<code class="sig-prename descclassname">nengo_ocl.clra_nonlinearities.</code><code class="sig-name descname">plan_probes</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">queue</span></em>, <em class="sig-param"><span class="n">periods</span></em>, <em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">Y</span></em>, <em class="sig-param"><span class="n">tag</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/nengo-labs/nengo-ocl/blob/v2.1.0/nengo_ocl/clra_nonlinearities.py#L808-L953"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nengo_ocl.clra_nonlinearities.plan_probes" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>P</strong><span class="classifier">raggedarray of ints</span></dt><dd><p>The period (in time-steps) of each probe</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="nengo_ocl.clra_nonlinearities.plan_conv2d">
<code class="sig-prename descclassname">nengo_ocl.clra_nonlinearities.</code><code class="sig-name descname">plan_conv2d</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">queue</span></em>, <em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">Y</span></em>, <em class="sig-param"><span class="n">filters</span></em>, <em class="sig-param"><span class="n">shape_in</span></em>, <em class="sig-param"><span class="n">shape_out</span></em>, <em class="sig-param"><span class="n">kernel_shape</span></em>, <em class="sig-param"><span class="n">conv</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">biases</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">padding</span><span class="o">=</span><span class="default_value">0, 0</span></em>, <em class="sig-param"><span class="n">strides</span><span class="o">=</span><span class="default_value">1, 1</span></em>, <em class="sig-param"><span class="n">channels_last</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">tag</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">transposed</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/nengo-labs/nengo-ocl/blob/v2.1.0/nengo_ocl/clra_nonlinearities.py#L1764-L1971"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nengo_ocl.clra_nonlinearities.plan_conv2d" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>filters = ch x size_i x size_j x nf             # conv transposed</strong></dt><dd><p>filters = ch x size_i x size_j x nf x ni x nj   # local transposed
biases = nf x ni x nj</p>
<p>conv : whether this is a convolution (true) or local filtering (false)</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="clra-gemv">
<h2>clra_gemv<a class="headerlink" href="#clra-gemv" title="Permalink to this headline">¶</a></h2>
<p>This contains kernels specific to the GEMV
(matrix-vector multiply) operation,
since it’s such an important and specialized operation.
Most people will not need to know the details
of this module.</p>
<span class="target" id="module-nengo_ocl.clra_gemv"></span><p>OpenCL kernels for performing general matrix-vector multiplies (GEMV).</p>
<dl class="py function">
<dt id="nengo_ocl.clra_gemv.ref_impl">
<code class="sig-prename descclassname">nengo_ocl.clra_gemv.</code><code class="sig-name descname">ref_impl</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">p</span></em>, <em class="sig-param"><span class="n">items</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/nengo-labs/nengo-ocl/blob/v2.1.0/nengo_ocl/clra_gemv.py#L263-L443"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nengo_ocl.clra_gemv.ref_impl" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an OCL function to calculate <code class="docutils literal notranslate"><span class="pre">items</span></code> of gemv operation <code class="docutils literal notranslate"><span class="pre">p</span></code>.</p>
<p>In this reference implementation, we create a work item per output number,
or more specifically, a work grid of shape <code class="docutils literal notranslate"><span class="pre">(max_y_len,</span> <span class="pre">len(items))</span></code>.
Each work item loops over the  dot products and the elements within
each dot product to compute the output value
<code class="docutils literal notranslate"><span class="pre">Y[global_id(1)][global_id(0)]</span></code>.</p>
</dd></dl>

<dl class="py function">
<dt id="nengo_ocl.clra_gemv.plan_sparse_dot_inc">
<code class="sig-prename descclassname">nengo_ocl.clra_gemv.</code><code class="sig-name descname">plan_sparse_dot_inc</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">queue</span></em>, <em class="sig-param"><span class="n">A_indices</span></em>, <em class="sig-param"><span class="n">A_indptr</span></em>, <em class="sig-param"><span class="n">A_data</span></em>, <em class="sig-param"><span class="n">X</span></em>, <em class="sig-param"><span class="n">Y</span></em>, <em class="sig-param"><span class="n">inc</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">tag</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/nengo-labs/nengo-ocl/blob/v2.1.0/nengo_ocl/clra_gemv.py#L1241-L1331"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nengo_ocl.clra_gemv.plan_sparse_dot_inc" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements a sparse matrix-vector multiply: Y += A * X or Y = A * X</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>A_indices, A_indptr</strong><span class="classifier">PyOpenCL array</span></dt><dd><p>Column sparse row index specifications</p>
</dd>
<dt><strong>A_data</strong><span class="classifier">PyOpenCL array</span></dt><dd><p>Matrix values at those indices</p>
</dd>
<dt><strong>X, Y</strong><span class="classifier">CLRaggedArrays of length 1</span></dt><dd><p>Input/output data.</p>
</dd>
<dt><strong>inc</strong><span class="classifier">bool</span></dt><dd><p>Whether to increment <code class="docutils literal notranslate"><span class="pre">Y</span></code> (True), or set it (False).</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>This function crashes when there are &gt;10M nonzero weights. A potential solution
would be some way to tell each work item to do multiple rows.</p>
</dd></dl>

</div>
<div class="section" id="raggedarrays">
<h2>RaggedArrays<a class="headerlink" href="#raggedarrays" title="Permalink to this headline">¶</a></h2>
<p>You can think of a <a class="reference internal" href="#nengo_ocl.raggedarray.RaggedArray" title="nengo_ocl.raggedarray.RaggedArray"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RaggedArray</span></code></a> a list of arrays.
Whereas NumPy allows lists of arrays
of the same size to be made into one big array
(e.g. if you’ve got five 3x2 arrays,
you can make a 5x3x2 array),
there’s no way to make arrays
of different sizes into one big one.
RaggedArray does this
by making one big memory buffer where all the data is stored,
and managing the reading and writing of that.</p>
<dl class="py class">
<dt id="nengo_ocl.raggedarray.RaggedArray">
<em class="property">class </em><code class="sig-prename descclassname">nengo_ocl.raggedarray.</code><code class="sig-name descname">RaggedArray</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">arrays</span></em>, <em class="sig-param"><span class="n">names</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">dtype</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">align</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/nengo-labs/nengo-ocl/blob/v2.1.0/nengo_ocl/raggedarray.py#L31-L236"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nengo_ocl.raggedarray.RaggedArray" title="Permalink to this definition">¶</a></dt>
<dd><p>A linear buffer partitioned into sections of various lengths.</p>
<p>Can also be viewed as an efficient way of storing a list of arrays,
in the same underlying buffer.</p>
</dd></dl>

<dl class="py class">
<dt id="nengo_ocl.clraggedarray.CLRaggedArray">
<em class="property">class </em><code class="sig-prename descclassname">nengo_ocl.clraggedarray.</code><code class="sig-name descname">CLRaggedArray</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">queue</span></em>, <em class="sig-param"><span class="n">np_raggedarray</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/nengo-labs/nengo-ocl/blob/v2.1.0/nengo_ocl/clraggedarray.py#L65-L311"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nengo_ocl.clraggedarray.CLRaggedArray" title="Permalink to this definition">¶</a></dt>
<dd><p>A linear device buffer partitioned into sections of various lengths.</p>
<p>Can also be viewed as an efficient way of storing a list of arrays on
the device, in the same underlying buffer.</p>
<dl class="py method">
<dt id="nengo_ocl.clraggedarray.CLRaggedArray.to_host">
<code class="sig-name descname">to_host</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/nengo-labs/nengo-ocl/blob/v2.1.0/nengo_ocl/clraggedarray.py#L301-L311"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nengo_ocl.clraggedarray.CLRaggedArray.to_host" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy the whole object to a host RaggedArray</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="nengo_ocl.clraggedarray.data_ptr">
<code class="sig-prename descclassname">nengo_ocl.clraggedarray.</code><code class="sig-name descname">data_ptr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">array</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/nengo-labs/nengo-ocl/blob/v2.1.0/nengo_ocl/clraggedarray.py#L22-L33"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nengo_ocl.clraggedarray.data_ptr" title="Permalink to this definition">¶</a></dt>
<dd><p>Given an Array, get a Buffer that starts at the right offset</p>
<p>This fails unless <code class="docutils literal notranslate"><span class="pre">array.offset</span></code> is a multiple of
<code class="docutils literal notranslate"><span class="pre">queue.device.mem_base_addr_align</span></code>, which is rare, so this isn’t really
a good function.</p>
</dd></dl>

<dl class="py function">
<dt id="nengo_ocl.clraggedarray.to_host">
<code class="sig-prename descclassname">nengo_ocl.clraggedarray.</code><code class="sig-name descname">to_host</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">queue</span></em>, <em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">dtype</span></em>, <em class="sig-param"><span class="n">start</span></em>, <em class="sig-param"><span class="n">shape</span></em>, <em class="sig-param"><span class="n">elemstrides</span></em>, <em class="sig-param"><span class="n">is_blocking</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/nengo-labs/nengo-ocl/blob/v2.1.0/nengo_ocl/clraggedarray.py#L36-L62"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nengo_ocl.clraggedarray.to_host" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy memory off the device, into a Numpy array.</p>
<p>If the requested array is discontiguous, the whole block is copied off
the device, and a view is created to show the appropriate part.</p>
</dd></dl>

</div>
<div class="section" id="module-nengo_ocl.operators">
<span id="operators"></span><h2>Operators<a class="headerlink" href="#module-nengo_ocl.operators" title="Permalink to this headline">¶</a></h2>
<p>Additional operators, and functions for pruning/simplifying operators.</p>
<dl class="py class">
<dt id="nengo_ocl.operators.MultiDotInc">
<em class="property">class </em><code class="sig-prename descclassname">nengo_ocl.operators.</code><code class="sig-name descname">MultiDotInc</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">Y</span></em>, <em class="sig-param"><span class="n">Y_in</span></em>, <em class="sig-param"><span class="n">beta</span></em>, <em class="sig-param"><span class="n">gamma</span></em>, <em class="sig-param"><span class="n">tag</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/nengo-labs/nengo-ocl/blob/v2.1.0/nengo_ocl/operators.py#L21-L196"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nengo_ocl.operators.MultiDotInc" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">&lt;-</span> <span class="pre">gamma</span> <span class="pre">+</span> <span class="pre">beta</span> <span class="pre">*</span> <span class="pre">y_in</span> <span class="pre">+</span> <span class="pre">\sum_i</span> <span class="pre">dot(A_i,</span> <span class="pre">x_i)</span></code></p>
<dl class="py method">
<dt id="nengo_ocl.operators.MultiDotInc.reads">
<em class="property">property </em><code class="sig-name descname">reads</code><a class="headerlink" href="#nengo_ocl.operators.MultiDotInc.reads" title="Permalink to this definition">¶</a></dt>
<dd><p>Signals that are read and not modified by this operator.</p>
<p>Reads occur after increments, and before updates.</p>
</dd></dl>

<dl class="py method">
<dt id="nengo_ocl.operators.MultiDotInc.incs">
<em class="property">property </em><code class="sig-name descname">incs</code><a class="headerlink" href="#nengo_ocl.operators.MultiDotInc.incs" title="Permalink to this definition">¶</a></dt>
<dd><p>Signals incremented by this operator.</p>
<p>Increments will be applied after sets (if it is set), and before reads.</p>
</dd></dl>

<dl class="py method">
<dt id="nengo_ocl.operators.MultiDotInc.sets">
<em class="property">property </em><code class="sig-name descname">sets</code><a class="headerlink" href="#nengo_ocl.operators.MultiDotInc.sets" title="Permalink to this definition">¶</a></dt>
<dd><p>Signals set by this operator.</p>
<p>Sets occur first, before increments. A signal that is set here cannot
be set or updated by any other operator.</p>
</dd></dl>

<dl class="py method">
<dt id="nengo_ocl.operators.MultiDotInc.updates">
<em class="property">property </em><code class="sig-name descname">updates</code><a class="headerlink" href="#nengo_ocl.operators.MultiDotInc.updates" title="Permalink to this definition">¶</a></dt>
<dd><p>Signals updated by this operator.</p>
<p>Updates are the last operation to occur to a signal.</p>
</dd></dl>

<dl class="py method">
<dt id="nengo_ocl.operators.MultiDotInc.make_step">
<code class="sig-name descname">make_step</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">signals</span></em>, <em class="sig-param"><span class="n">dt</span></em>, <em class="sig-param"><span class="n">rng</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/nengo-labs/nengo-ocl/blob/v2.1.0/nengo_ocl/operators.py#L195-L196"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nengo_ocl.operators.MultiDotInc.make_step" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a callable that performs the desired computation.</p>
<p>This method must be implemented by subclasses. To fully understand what
an operator does, look at its implementation of <code class="docutils literal notranslate"><span class="pre">make_step</span></code>.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>signals</strong><span class="classifier">SignalDict</span></dt><dd><p>A mapping from signals to their associated live ndarrays.</p>
</dd>
<dt><strong>dt</strong><span class="classifier">float</span></dt><dd><p>Length of each simulation timestep, in seconds.</p>
</dd>
<dt><strong>rng</strong><span class="classifier"><a class="reference external" href="https://numpy.org/doc/stable/reference/random/legacy.html#numpy.random.RandomState" title="(in NumPy v1.19)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.random.RandomState</span></code></a></span></dt><dd><p>Random number generator for stochastic operators.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="nengo_ocl.operators.signal_io_dicts">
<code class="sig-prename descclassname">nengo_ocl.operators.</code><code class="sig-name descname">signal_io_dicts</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">operators</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/nengo-labs/nengo-ocl/blob/v2.1.0/nengo_ocl/operators.py#L199-L225"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nengo_ocl.operators.signal_io_dicts" title="Permalink to this definition">¶</a></dt>
<dd><p>Organizes operators into dictionaries according to the signals they
set/inc/read/update.</p>
<p>Copied from Nengo DL. See there for full documentation</p>
</dd></dl>

<dl class="py function">
<dt id="nengo_ocl.operators.remove_unmodified_resets">
<code class="sig-prename descclassname">nengo_ocl.operators.</code><code class="sig-name descname">remove_unmodified_resets</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">operators</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/nengo-labs/nengo-ocl/blob/v2.1.0/nengo_ocl/operators.py#L228-L264"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nengo_ocl.operators.remove_unmodified_resets" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove any Reset operators that are targeting a signal that is
never modified.</p>
<p>If a signal is reset, but never inced/updated after that, we can just set
the default signal value to the reset value and remove the reset. Note:
this wouldn’t normally happen, but it can happen if we removed
some of the incs (e.g. in <a class="reference internal" href="#nengo_ocl.operators.remove_zero_incs" title="nengo_ocl.operators.remove_zero_incs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">remove_zero_incs</span></code></a>).</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>operators</strong><span class="classifier">list of <a class="reference external" href="https://www.nengo.ai/nengo/backend-api.html#nengo.builder.Operator" title="(in Nengo v3.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Operator</span></code></a></span></dt><dd><p>Operators in the model</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl>
<dt><strong>new_operators</strong><span class="classifier">list of <a class="reference external" href="https://www.nengo.ai/nengo/backend-api.html#nengo.builder.Operator" title="(in Nengo v3.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Operator</span></code></a></span></dt><dd><p>Modified list of operators</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="nengo_ocl.operators.remove_zero_incs">
<code class="sig-prename descclassname">nengo_ocl.operators.</code><code class="sig-name descname">remove_zero_incs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">operators</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/nengo-labs/nengo-ocl/blob/v2.1.0/nengo_ocl/operators.py#L267-L332"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nengo_ocl.operators.remove_zero_incs" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove any operators where we know the input (and therefore output) is
zero.</p>
<p>If the input to a DotInc/ElementwiseInc/Copy/ConvInc is zero then we know
that the output of the op will be zero, so we can just get rid of it.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>operators</strong><span class="classifier">list of <a class="reference external" href="https://www.nengo.ai/nengo/backend-api.html#nengo.builder.Operator" title="(in Nengo v3.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Operator</span></code></a></span></dt><dd><p>Operators in the model</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl>
<dt><strong>new_operators</strong><span class="classifier">list of <a class="reference external" href="https://www.nengo.ai/nengo/backend-api.html#nengo.builder.Operator" title="(in Nengo v3.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Operator</span></code></a></span></dt><dd><p>Modified list of operators</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Copied from <code class="docutils literal notranslate"><span class="pre">nengo_dl/graph_optimizer.py</span></code>.</p>
</dd></dl>

<dl class="py function">
<dt id="nengo_ocl.operators.simplify_operators">
<code class="sig-prename descclassname">nengo_ocl.operators.</code><code class="sig-name descname">simplify_operators</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">operators</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/nengo-labs/nengo-ocl/blob/v2.1.0/nengo_ocl/operators.py#L335-L344"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nengo_ocl.operators.simplify_operators" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply simplifications to a list of operators, returning a simplified list.</p>
<p>Applies all the simplifications in <code class="docutils literal notranslate"><span class="pre">nengo_ocl.operators.simplifications</span></code>.</p>
</dd></dl>

</div>
<div class="section" id="module-nengo_ocl.ast_conversion">
<span id="python-ast-conversion"></span><h2>Python AST conversion<a class="headerlink" href="#module-nengo_ocl.ast_conversion" title="Permalink to this headline">¶</a></h2>
<p>This module contains a parser to turn Python functions into OCL code.</p>
<div class="admonition-todo admonition" id="id1">
<p class="admonition-title">Todo</p>
<p>Better testing, i.e., write test cases for all the test functions
at the bottom of this file.</p>
</div>
<div class="admonition-todo admonition" id="id2">
<p class="admonition-title">Todo</p>
<p>Get binary_and, or, xor, etc. functions working (priority = low)</p>
<ul class="simple">
<li><p>this will require the ability to specify integer input variables</p></li>
<li><p>or perhaps just cast inputs to these functions to integers</p></li>
</ul>
</div>
<div class="admonition-todo admonition" id="id3">
<p class="admonition-title">Todo</p>
<p>A danger right now is that there is no check that the user uses all
passed inputs in their function. For example, if the fn is meant to act on
three arguments, and the user makes a mistake in their model that passes a
5-vector to the function, no warning is issued. There’s no obvious way to
deal with this better, though.</p>
</div>
<dl class="py class">
<dt id="nengo_ocl.ast_conversion.Expression">
<em class="property">class </em><code class="sig-prename descclassname">nengo_ocl.ast_conversion.</code><code class="sig-name descname">Expression</code><a class="reference external" href="https://github.com/nengo-labs/nengo-ocl/blob/v2.1.0/nengo_ocl/ast_conversion.py#L268-L284"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nengo_ocl.ast_conversion.Expression" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents a numerical expression</p>
</dd></dl>

<dl class="py class">
<dt id="nengo_ocl.ast_conversion.VarExp">
<em class="property">class </em><code class="sig-prename descclassname">nengo_ocl.ast_conversion.</code><code class="sig-name descname">VarExp</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/nengo-labs/nengo-ocl/blob/v2.1.0/nengo_ocl/ast_conversion.py#L287-L292"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nengo_ocl.ast_conversion.VarExp" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="nengo_ocl.ast_conversion.NumExp">
<em class="property">class </em><code class="sig-prename descclassname">nengo_ocl.ast_conversion.</code><code class="sig-name descname">NumExp</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/nengo-labs/nengo-ocl/blob/v2.1.0/nengo_ocl/ast_conversion.py#L295-L310"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nengo_ocl.ast_conversion.NumExp" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="nengo_ocl.ast_conversion.UnaryExp">
<em class="property">class </em><code class="sig-prename descclassname">nengo_ocl.ast_conversion.</code><code class="sig-name descname">UnaryExp</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">op</span></em>, <em class="sig-param"><span class="n">right</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/nengo-labs/nengo-ocl/blob/v2.1.0/nengo_ocl/ast_conversion.py#L313-L342"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nengo_ocl.ast_conversion.UnaryExp" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="nengo_ocl.ast_conversion.BinExp">
<em class="property">class </em><code class="sig-prename descclassname">nengo_ocl.ast_conversion.</code><code class="sig-name descname">BinExp</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">left</span></em>, <em class="sig-param"><span class="n">op</span></em>, <em class="sig-param"><span class="n">right</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/nengo-labs/nengo-ocl/blob/v2.1.0/nengo_ocl/ast_conversion.py#L345-L392"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nengo_ocl.ast_conversion.BinExp" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="nengo_ocl.ast_conversion.FuncExp">
<em class="property">class </em><code class="sig-prename descclassname">nengo_ocl.ast_conversion.</code><code class="sig-name descname">FuncExp</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fn</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/nengo-labs/nengo-ocl/blob/v2.1.0/nengo_ocl/ast_conversion.py#L395-L449"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nengo_ocl.ast_conversion.FuncExp" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="nengo_ocl.ast_conversion.IfExp">
<em class="property">class </em><code class="sig-prename descclassname">nengo_ocl.ast_conversion.</code><code class="sig-name descname">IfExp</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cond</span></em>, <em class="sig-param"><span class="n">true</span></em>, <em class="sig-param"><span class="n">false</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/nengo-labs/nengo-ocl/blob/v2.1.0/nengo_ocl/ast_conversion.py#L452-L468"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nengo_ocl.ast_conversion.IfExp" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="nengo_ocl.ast_conversion.FunctionFinder">
<em class="property">class </em><code class="sig-prename descclassname">nengo_ocl.ast_conversion.</code><code class="sig-name descname">FunctionFinder</code><a class="reference external" href="https://github.com/nengo-labs/nengo-ocl/blob/v2.1.0/nengo_ocl/ast_conversion.py#L471-L487"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nengo_ocl.ast_conversion.FunctionFinder" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds a FunctionDef or Lambda in an Abstract Syntax Tree</p>
<dl class="py method">
<dt id="nengo_ocl.ast_conversion.FunctionFinder.generic_visit">
<code class="sig-name descname">generic_visit</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">stmt</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/nengo-labs/nengo-ocl/blob/v2.1.0/nengo_ocl/ast_conversion.py#L477-L487"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nengo_ocl.ast_conversion.FunctionFinder.generic_visit" title="Permalink to this definition">¶</a></dt>
<dd><p>Called if no explicit visitor function exists for a node.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="nengo_ocl.ast_conversion.OclTranslator">
<em class="property">class </em><code class="sig-prename descclassname">nengo_ocl.ast_conversion.</code><code class="sig-name descname">OclTranslator</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">source</span></em>, <em class="sig-param"><span class="n">globals_dict</span></em>, <em class="sig-param"><span class="n">closure_dict</span></em>, <em class="sig-param"><span class="n">in_dims</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">out_dim</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/nengo-labs/nengo-ocl/blob/v2.1.0/nengo_ocl/ast_conversion.py#L490-L832"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nengo_ocl.ast_conversion.OclTranslator" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="nengo_ocl.ast_conversion.OclTranslator.visit">
<code class="sig-name descname">visit</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">node</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/nengo-labs/nengo-ocl/blob/v2.1.0/nengo_ocl/ast_conversion.py#L561-L566"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nengo_ocl.ast_conversion.OclTranslator.visit" title="Permalink to this definition">¶</a></dt>
<dd><p>Visit a node.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-nengo_ocl.utils">
<span id="utils"></span><h2>Utils<a class="headerlink" href="#module-nengo_ocl.utils" title="Permalink to this headline">¶</a></h2>
<p>Utility functions and compatibility imports.</p>
<dl class="py function">
<dt id="nengo_ocl.utils.equal_strides">
<code class="sig-prename descclassname">nengo_ocl.utils.</code><code class="sig-name descname">equal_strides</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">strides1</span></em>, <em class="sig-param"><span class="n">strides2</span></em>, <em class="sig-param"><span class="n">shape</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/nengo-labs/nengo-ocl/blob/v2.1.0/nengo_ocl/utils.py#L19-L31"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nengo_ocl.utils.equal_strides" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether two arrays have equal strides.</p>
<p>Code from <a class="reference external" href="https://github.com/inducer/compyte">https://github.com/inducer/compyte</a></p>
</dd></dl>

<dl class="py function">
<dt id="nengo_ocl.utils.split">
<code class="sig-prename descclassname">nengo_ocl.utils.</code><code class="sig-name descname">split</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">iterator</span></em>, <em class="sig-param"><span class="n">criterion</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/nengo-labs/nengo-ocl/blob/v2.1.0/nengo_ocl/utils.py#L52-L62"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nengo_ocl.utils.split" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of objects that match criterion and those that do not.</p>
</dd></dl>

</div>
</div>


            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div><footer class="text-light footer-main gradient-bottom">
  <p class="small text-center mb-0">
    <a class="no-hover-line" href="https://appliedbrainresearch.com">
      <img
        src="https://appliedbrainresearch.com/img/logo-blue-notext.svg"
        height="48"
      />
    </a>
    <a href="https://www.nengo.ai/">What is Nengo?</a>
    <a href="https://www.nengo.ai/examples/">Examples</a>
    <a href="https://www.nengo.ai/documentation/">Documentation</a>
    <a href="https://www.nengo.ai/getting-started/">Getting started</a>
    <a href="https://www.nengo.ai/privacy/">Privacy</a>
  </p>
  <p class="small text-center mb-0">&copy; Applied Brain Research</p>
</footer>
<script>
  function switchVersion(select) {
    var option = select.selectedOptions[0];
    if (option.hasAttribute("value")) {
      window.location = option.value;
    }
  }
</script>

<script>
  var elements = document.querySelectorAll('.sidenav');
  Stickyfill.add(elements);
</script>
<script>
  ScrollReveal().reveal(".fade-in", {
      scale: 0.85,
      duration: 1000,
      delay: 250,
      interval: 50
  });
</script>
<script>
  $('a.toggle-sidenav').on('click', function(e) {
    e.preventDefault();
    if ( $(this).hasClass('active') ) {
      $(this).removeClass('active');
      $('.sidenav').removeClass('open');
    } else {
      $(this).addClass('active');
      $('.sidenav').addClass('open');
    }
  });
</script>
<script>
  var lists = document.querySelectorAll('.toctree ul');
  lists.forEach((ul) => {
      ul.classList.add("nav");
  });
  var links = document.querySelectorAll('.toctree a');
  links.forEach((link) => {
      link.classList.add("nav-link");
  });
  $("body").scrollspy({target: ".sidenav"});
</script>
  </body>
</html>